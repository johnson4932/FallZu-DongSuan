<!DOCTYPE HTML>
<html>
    <% include head %>
    <body>
        <div id="doc">
            <div class="navbar navbar-inverse navbar-fixed-top">
                <div class="container">
                    <div class="navbar-header">
                        <a class="navbar-brand" href="#">Voting system</a>
                    </div><!-- end .navbar-header -->
                    <ul class="nav navbar-nav navbar-right">
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Johnson <b class="caret"></b></a>
                            <ul class="dropdown-menu">
                                <li><a data-toggle="modal" href="#createVoteModal">Create Vote</a></li>
                                <li><a data-toggle="modal" href="#createGroupModal">Create Group</a></li>
                                <li><a href="#">Add Candidate</a></li>
                                <li><a href="#">Add Admin</a></li>
                                <li><a href="#">Modify Profile</a></li>
                                <li><a href="/logout">Logout</a></li>
                            </ul><!-- end .dropdown-menu -->
                        </li><!-- end .dropdown -->
                    </ul><!-- end .navbar-nav -->
                </div><!-- end .container -->
            </div><!-- end .navbar -->
            <div class="container">
                <% include createVoteModal %>
                <% include createGroupModal %>

                <div id="alertMessage" class="alert alert-success">TEST</div><!-- end .alertMessage -->
                aaaadsfd;lkjdalkgjadlaa
                <span class="glyphicon glyphicon-cloud"></span>
            </div><!-- end .container -->
        </div><!-- end #doc -->
        <script>
            (function($){
                $('#alertMessage').hide();

                //createVoteModal
                $('#createVoteModal .submit').click(function() {
                    $.post('/api/createVote', $('#createVoteModal form').serialize())
                    .done(function(data) {
                        $('#createVoteModal').modal('hide');
                        var voteStatus = (true == data.Success) ? ('success') : ('danger');
                        $('#alertMessage').html(data.Message).attr('class','alert alert-' + voteStatus).show();
                    })
                    .fail(function(err) {
                        $('#createVoteModal').modal('hide');
                        $('#alertMessage').html('Please Login').attr('class','alert alert-danger').show();
                    });
                });

                //createGroupModal
                $('#createGroupModal .clone').click(function() {
                    var check = $('#createGroupModal .clone:checked').val();
                    var div = $(this).parents().find('.cloneDiv');
                    (undefined == check) ? (div.hide()) : (div.show());
                });

                $('#createGroupModal .addColumn').click(function(e) {
                    e.preventDefault();
                    $('#createGroupModal .group-name .form-control:first')
                        .clone()
                        .val("")
                        .appendTo('#createGroupModal .group-name');
                });

                $('#createGroupModal .submit').click(function() {
                    $.post('/api/createGroup', $('#createGroupModal form').serialize())
                    .done(function(data) {
                        $('#createGroupModal').modal('hide');
                        var voteStatus = (true == data.Success) ? ('success') : ('danger');
                        $('#alertMessage').html(data.Message).attr('class','alert alert-' + voteStatus).show();
                    })
                    .fail(function(err) {
                        $('#createGroupModal').modal('hide');
                        $('#alertMessage').html('Please Login').attr('class','alert alert-danger').show();
                    });
                });

            })(jQuery);
        </script>
    </body>
</html>
